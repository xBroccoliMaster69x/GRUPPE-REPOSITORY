<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WEB-RAPPORT</title>
    <style>
        .input {
            text-align: center;
            border: 5px solid black;
            margin: auto;
            margin-top: 10%;
            width: 50%;
            padding: 10px;
        }
        
        .invisible {
            display: none;
        }

    </style>
</head>
<body>
    <section class="input"> <!--Dette er visualiser knappen og lim inn boksen-->
        <p></p>
        <p>Lim inn id: </p>
        <input type="text" value="" id="timetrxidOUTDATA" style="width: 200px">
        <div class="results" id="results">
        <pre class="invisible"></pre>
        <input type="button" id="btnData"value="Visualiser">
        </div> 
        
        <!--Denne gjøre boksen større og mindre--> 
        <div id="debug"></div>
        <canvas id="report" width="650" height="550"></canvas>
    </section>
    

<script>

    // variabler og funksjoner
    var timetrxidOUTDATA=document.getElementById("timetrxidOUTDATA");
    var btnData=document.getElementById("btnData");
    var canvas = document.getElementById('report');
    var ctx = canvas.getContext('2d');
    const results = document.querySelector('.results pre');

    var entries = 0; // Brukes til å telle hvor mange personer som har lagt inn data

    //Dette er teksten 
    ctx.font = '14px serif';                 // Dette er font, KANSKJE SKIFTE DENNE TIL SAMME FONT SOM RESTEN AV SIDEN?
    ctx.fillText('Early bird', 5, 30);       //Dette er navnet på slidersene
    ctx.fillText('Night owl', 325, 30);

    ctx.fillText('Work on it togheter', 5, 80);
    ctx.fillText('Go off alone and think', 325, 80);

    ctx.fillText('Tell me the backstory', 5, 130);
    ctx.fillText('Cut to the chase', 325, 130);

    ctx.fillText('Need to talk it out', 5, 180);
    ctx.fillText('Need to move on', 325, 180);

    ctx.fillText('Verbal processor', 5, 230);
    ctx.fillText('Mental processor', 325, 230);

    ctx.fillText('Schedule a time to chat', 5, 280);
    ctx.fillText('Interrupt me when you need me', 325, 280);
    
    ctx.fillText('Video chat', 5, 330);
    ctx.fillText('Slack/Text', 325, 330);

    ctx.fillText('09-17 Hours', 5, 380);
    ctx.fillText('I have no set schedule', 325, 380);

    ctx.fillText('Take your time', 5, 430);
    ctx.fillText('Work best under pressure', 325, 430);

    ctx.fillText('Work a lot on one thing', 5, 480);
    ctx.fillText('Work a little on several things', 325, 480);

    ctx.fillText('Background noise', 5, 530);
    ctx.fillText('Quiet place', 325, 530);

// Tegn linjene mellom teksten
    function DrawLines (y)
    {
        ctx.beginPath();
        ctx.moveTo(150, y);
        ctx.lineTo(295, y);
        ctx.stroke();
    }

    for (let i = 0; i < 11; i++) // 11 er antall sliders
    {
        DrawLines(26 + (i * 50)); // Hopper ned 50 pixler hver gang
    }


    // Funksjon for å skrive navn
    function WriteName (data, y, color)
    {
        ctx.fillStyle = "black";
        ctx.fillText(data.navn, 564, y+4,);
        var R = 4;
        ctx.beginPath();
        ctx.arc(550, y, R, 0, 2 * Math.PI, false);
        ctx.fillStyle = color;
        ctx.fill();
        ctx.lineWidth = 1;
        ctx.strokeStyle = "black";
        ctx.stroke();
        ctx.closePath();
    }

    // Funksjon for å visualisere data
    function DrawDataPoints (data, y, color)
    {
        var R = 4;
        ctx.beginPath();
        ctx.arc((150 + parseInt(data, 12)), y, R, 0, 2 * Math.PI, false);
        ctx.fillStyle = color;
        ctx.fill();
        ctx.lineWidth = 1;
        ctx.strokeStyle = "black";
        ctx.stroke();
        ctx.closePath();
    }
    
    // Funksjon for å hente data fra server
    function RetrieveDataFromServer (dataId, color)
    {
        fetch("https://bacit.info/hwr/" + dataId + ".json", {cache: 'no-cache'})
            .then(response => response.json())
            .then(data => {
                console.log(data);
                results.innerText = JSON.stringify(data, null, 11);
                document.querySelector("#debug").innerText = "Navn: " + data.navn + "\nGruppe: " + data.gruppe; // Mulig denne mpå endres

                // Tegn navnet til deltakeren med et fargepunkt
                entries++;
                WriteName(data, 26 + (entries * 30), color); // Tallet i parantesen bestemmer avstanden mellom navnene
               
                //Tegn data fra de ulike slidersene
                DrawDataPoints(data.eorn, 26, color); // Data fra slider "Early bird OR Night owl"
                DrawDataPoints(data.worg, 76, color); // Data fra slider "Work on it togheter OR Go off alone and think"
                DrawDataPoints(data.torc, 126, color); // Data fra slider "Tell me the backstory OR Cut to the chase"
                DrawDataPoints(data.norn, 176, color); // Data fra slider "Need to talk it out OR Need to move on"
                DrawDataPoints(data.vorm, 226, color); // Data fra slider "Verbal processor OR Mental processor"
                DrawDataPoints(data.sori, 276, color); // Data fra slider "Schedule a time to chat OR Interrupt me when you need me"
                DrawDataPoints(data.vors, 326, color); // Data fra slider "Video chat OR Slack/text "
                DrawDataPoints(data.hori, 376, color); // Data fra slider "09-17 Hours OR I have no set schedule"
                DrawDataPoints(data.eks1, 426, color); // Data fra slider "Take your time OR Work best under pressure"
                DrawDataPoints(data.eks2, 476, color); // Data fra slider "Work a lot on one thing OR Work a little on several things"
                DrawDataPoints(data.eks3, 526, color); // Data fra slider "Background noise OR Quiet place"
            })
    }

    /* Registrerer når knappen "Visualiser" blir trykket på, og kjører funksjonen
    RetrieveDataFromServer med dataId og farge som argumenter */
    btnData.onclick=function ()
    {
        RetrieveDataFromServer(timetrxidOUTDATA.value, "pink");
    }


    // Gruppe 5A sin inndata lagret på server
        RetrieveDataFromServer("", "tomato"); // rød = AMIR
        RetrieveDataFromServer("20221210224540-3d3d8b247cf0cb358472c2d375cb2e88", "blue"); // blå = ALEXANDER
        RetrieveDataFromServer("20221212114847-be54d9ffa4fa6d5c623616625b6ae5fe", "fuchsia"); // lilla/roda = JOACKIM
        RetrieveDataFromServer("20221212111229-39b958d0eee700ac3fb2b4e95e41444d", "orange"); // oransj = REBEKKA
        RetrieveDataFromServer("20221211193424-4f062030c6b58c570e937134f99dd9a4", "snow"); // hvit = SIMEN
        RetrieveDataFromServer("20221210112013-6e0afd1cd355d8d0ee2bc859741335ae", "aqua"); // lysblå = TOBIAS
        RetrieveDataFromServer("20221210164422-1bdab7d58dba65cc9937dc03531493dd", "chartreuse"); // grønn = VICTOR

</script>
</body>

</html>

